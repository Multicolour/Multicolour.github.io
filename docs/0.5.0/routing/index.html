<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Multicolour - NodeJS NodeJS REST API generator.</title>

    <base href="https://getmulticolour.com" />
    <!-- <base href="http://getmulticolour.local" /> -->

    <!-- Base meta. -->
    <meta name="identifier-url" content="https://getmulticolour.com" />
    <meta name="title" content="Multicolour - NodeJS REST API generator." />
    <meta name="description" content="Multicolour - NodeJS REST API generator using just JSON." />
    <meta name="abstract" content="Multicolour - NodeJS REST API generator using just JSON." />
    <meta name="keywords" content="multicolour, rest api, generator, nodejs" />
    <meta name="author" content="New World Code Ltd" />
    <meta name="revisit-after" content="7" />
    <meta name="language" content="EN" />
    <meta name="copyright" content="Â© 2016 New World Code Ltd" />
    <meta name="robots" content="Index" />

    <!-- Google+ -->
    <meta itemprop="name" content="Multicolour - NodeJS REST API generator.">
    <meta itemprop="description" content="Multicolour - NodeJS REST API generator using just JSON.">
    <meta itemprop="image" content="https://getmulticolour.com/images/MC_Icon_PurpleRain_Logotype.png">

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@getmulticolour">
    <meta name="twitter:title" content="Multicolour - NodeJS REST API generator.">
    <meta name="twitter:description" content="Multicolour - NodeJS REST API generator using just JSON.">
    <meta name="twitter:creator" content="@getmulticolour">
    <meta name="twitter:image" content="https://getmulticolour.com/images/MC_Icon_PurpleRain_Logotype.png">

    <!-- Open Graph data -->
    <meta property="og:title" content="Multicolour - NodeJS REST API generator." />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://getmulticolour.com" />
    <meta property="og:image" content="https://getmulticolour.com/images/MC_Icon_PurpleRain_Logotype.png" />
    <meta property="og:description" content="Multicolour - NodeJS REST API generator using just JSON." />
    <meta property="og:site_name" content="Multicolour - NodeJS REST API generator." />

    <!-- Browser behaviour -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Browser Iconography -->
    <link rel="apple-touch-icon" sizes="57x57" href="apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,300" rel="stylesheet" type="text/css" async>
    <link href="stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="stylesheets/prism.css" media="screen, projection" rel="stylesheet" type="text/css" async>
  </head>

  <body class="routing">
    <main>
      <nav class="general-nav">
        <ul>
          <li>
            <a href="" class="no-border">
              <img class="nav-logo" src="images/logo-stamp.svg" alt="Multicolour - NodeJS REST API generator.">
            </a>
          </li>
          <li>
            <a href="examples">examples</a>
          </li>
          <li>
            <a href="docs/">docs</a>
          </li>
          <li>
            <a href="https://medium.com/@getmulticolour" rel="nofollow">blog</a>
          </li>
        </ul>
      </nav>

      <section class="content">
        <h1 id="routing">Routing</h1>
<p>Multicolour generates a lot of routes for you but your business logic is exactly that, it's yours and yours only. Multicolour doesn't try to handle that for you but saves you the time getting there.</p>
<p>By default Multicolour generates your CRUD interface and configures your auth, validations and Swagger documentation.</p>
<p>Multicolour generates the following for you.</p>
<ul>
<li><code>POST /{identity}</code> Create a new <code>{identity}</code></li>
<li><code>PUT /{identity}</code> Update or create a <code>{identity}</code></li>
<li><code>GET /{identity}?page={page}</code> Get a paginated list of <code>{identity}</code></li>
<li><code>GET /{identity}/{id}</code> Get a single <code>{identity}</code> by <code>{id}</code></li>
<li><code>GET /{identity}?{query}&amp;page={page}</code> Get a paginated list of <code>{identity}</code> where <code>{query}</code></li>
<li><code>PATCH /{identity}</code> Update a <code>{identity}</code></li>
<li><code>DELETE /{identity}</code> Permanently remove a <code>{identity}</code></li>
</ul>
<p>Creating your own routes is simple, currently custom routes are not transportable between server technologies but may be in the future.</p>
<h2 id="the-handlers">The handlers</h2>
<p>Multicolour core supplies handlers for pretty much all your verbs out of the box, you can access and use them anytime by <code>get</code>ting them from core like below.</p>
<pre class="language-javascript"><code>const handlers = my_service.get(&quot;handlers&quot;)

// handlers -&gt; Multicolour_Route_Templates</code></pre>
<h2 id="multicolour_route_templates-class"><code>Multicolour_Route_Templates</code> class</h2>
<p>This class contains all the handlers/route templates, they do the work on the database with the request data for you. The methods all share the same signature of</p>
<p><code>[VERB](model, request, reply)</code></p>
<p>Where <code>[VERB]</code> is one of the following</p>
<pre><code>POST - Create stuff.
GET - Read stuff.
PATCH - Update stuff.
PUT - Update or create stuff.
DELETE - Delete stuff.
UPLOAD - Upload stuff.</code></pre>
<p>and where model is retrieved from <code>my_service.get(&quot;database&quot;).get(&quot;models&quot;)</code></p>
<h2 id="creating-custom-routes">Creating custom routes</h2>
<p>You have had a request from the client asking for something Multicolour hasn't already given you, it's time to write a custom route and handler.</p>
<p>Add a <code>custom_route</code> property to your blueprint:</p>
<pre class="language-javascript"><code>{
  attributes: {...},
  custom_routes: function custom_routes(server, multicolour) {
    // Route based on your server technology here.
  }
}</code></pre>
<p>Multicolour does not interfere, know about or modify anything you do inside of this function. This is your domain and you are free to do what you will.</p>
<p>An example route using the <code>hapi</code> server technology might look like this.</p>
<pre class="language-javascript"><code>{
  attributes: {...},
  custom_routes: function custom_routes(server, multicolour) {
    // this === this blueprint
    server.route({
      method: &quot;GET&quot;,
      path: &quot;/project/count&quot;,
      handler: (request, reply) =&gt; {
        this
          .count({})
          .exec((err, count) =&gt; reply[multicolour.request(&quot;decorator&quot;)](err || count))
      }
    })
  }
}</code></pre>
<h2 id="gotchas-while-writing-custom-routes">Gotchas while writing custom routes</h2>
<p>As mentioned above, Multicolour makes no effort to watch, change or interfere with your custom routes as we consider <code>custom_routes</code> to contain business critical logic.</p>
<h3 id="decorators">Decorators</h3>
<p>In order to &quot;decorate&quot; your reply, you should request the <code>decorator</code> property stored on Multicolour, <code>multicolour.request(&quot;decorator&quot;)</code>.</p>
<h3 id="auth">Auth</h3>
<p>If you wish to authenticate your custom routes in the same way that Multicolour authenticates your CRUD routes, you must do this manually.</p>
<h3 id="validation">Validation</h3>
<p>Payload and response validations are not created for you and you should implement this yourself.</p>
<h3 id="path-clashes">Path clashes</h3>
<p>If you need to write a custom handler for one of the CRUD operations, currently you need to flag to Multicolour that you don't want to generate routes at all for this blueprint with the <code>NO_AUTO_GEN_ROUTES</code> property and write handlers for all the verbs you wish to support.</p>
<h3 id="associations">Associations</h3>
<p>You will not see associations automatically populated, Multicolour has however already fixed and made the associations to other blueprints for you so <code>.populateAll()</code> will work for your queries and any decorator plugin should automatically call this for you.</p>
      </section>

      <section class="email-signup">
        <form
          method="post"
          enctype="multipart/form-data"
          action="https://getmulticolour.us12.list-manage.com/subscribe/post?u=bec938217586432b04e1ea290&amp;id=e5a068eb80">
          <fieldset name="email">
            <input
              name="EMAIL"
              type="email"
              alt="Enter your best email for news on Multicolour's development"
              placeholder="Enter your best email for news on Multicolour's development">
            <button
              type="submit"
              name="subscribe">
              SIGN UP
            </button>
          </fieldset>
        </form>
        <p class="really-small">
          Your email address is safe with us, you'll ONLY receive occasional news about Multicolour. Nothing and no one else, but us &hearts;
        </p>
      </section>

    </main>

    <footer>
      <ul>
        <li>
          <a href="https://github.com/Multicolour/multicolour/blob/master/CONTRIBUTING.md">
            Code of Conduct/Contribution rules
          </a>
        </li>
        <li>
          <a href="/Multicolour_Branding_Guidelines_2016.pdf" target="_blank" rel="nofollow">
            Branding guidelines
          </a>
        </li>
        <li>
          <a href="https://github.com/Multicolour" target="_blank" rel="nofollow">
            Github Organisation
          </a>
        </li>
      </ul>
      <p>&copy; Copyright to Get Multicolour &amp; New World Code Ltd 2016</p>
    </footer>

    <script async src="prism.js"></script>
    <script>
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
        analytics.load("Qurt0kpTtzocuF8h8VgRH6ygztdQPK5i");
        analytics.page()
      }}();
    </script>
  </body>
</html>
